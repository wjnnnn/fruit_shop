<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>æ°´æœç¼¤çº· - æº¯æºä¸å•†åŸ</title>  
    <style>  
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }  
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }  
        h1 { text-align: center; color: #333; }  
        .section-title { border-bottom: 2px solid #4CAF50; padding-bottom: 10px; margin-top: 30px; color: #4CAF50; font-size: 1.2em; font-weight: bold;}  
          
        .trace-card { background: #f9f9f9; border-left: 5px solid #4CAF50; margin: 15px 0; padding: 15px; border-radius: 4px; }  
        .fruit-name { font-size: 1.2em; font-weight: bold; color: #333; }  
        .info-row { display: flex; justify-content: space-between; margin-top: 5px; color: #666; font-size: 0.9em; }  
          
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }  
        .shop-item { border: 1px solid #ddd; padding: 10px; text-align: center; border-radius: 8px; }  
        .shop-item button { background: #ff9800; color: white; border: none; padding: 5px 15px; border-radius: 20px; cursor: pointer; margin-top: 5px;}  
          
        .footer { text-align: center; margin-top: 40px; color: #999; font-size: 0.8em; }  
          
        .banner { width: 100%; height: 150px; background: #e0e0e0; display: flex; align-items: center; justify-content: center; color: #888; border-radius: 8px; margin-bottom: 20px; background-image: url('https://images.unsplash.com/photo-1610832958506-aa56368176cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'); background-size: cover; background-position: center;}  
        .banner h2 { color: white; text-shadow: 1px 1px 5px rgba(0,0,0,0.7); }  
    </style>  
</head>  
<body>  
  
<div class="container">  
    <div class="banner">  
        <h2>æ­¤æ¬¡è´­ç‰©æº¯æºä¿¡æ¯</h2>  
    </div>  
  
    <!-- æº¯æºä¿¡æ¯åŒºåŸŸ -->  
    <div class="section-title">ğŸ“¦ æ‚¨è´­ä¹°çš„å•†å“æº¯æº</div>  
    <div id="trace-list">  
        <!-- è¿™é‡Œçš„å†…å®¹ç”± JavaScript è‡ªåŠ¨ç”Ÿæˆ -->  
        <p style="text-align:center; color:#999;">æ­£åœ¨è¯»å–åŒºå—é“¾æº¯æºæ•°æ®...</p>  
    </div>  
  
    <!-- å•†åŸåŒºåŸŸ -->  
    <div class="section-title">ğŸ›’ åœ¨çº¿è¡¥è´§ (æé€Ÿé…é€)</div>  
    <div class="shop-grid" id="shop-list">  
        <!-- å•†å“åˆ—è¡¨ -->  
    </div>  
      
    <div class="footer">  
        Â© 2023 æ°´æœç¼¤çº·è¶…å¸‚ IoTç³»ç»Ÿæ”¯æŒ<br>  
        æŠ€æœ¯æ”¯æŒï¼šSTM32 + Web  
    </div>  
</div>  
  
<script>  
    // 1. å®šä¹‰æ•°æ®åº“ (å¿…é¡»å’Œ STM32 é‡Œçš„æ•°ç»„å¯¹åº”)  
    const fruitDB = [  
        { id: 0, name: "Apple (è‹¹æœ)", origin: "å±±ä¸œçƒŸå°", quality: "Açº§", price: 10.5, img: "ğŸ" },  
        { id: 1, name: "Banana (é¦™è•‰)", origin: "å¹¿è¥¿å—å®", quality: "Açº§", price: 5.0, img: "ğŸŒ" },  
        { id: 2, name: "Grape (è‘¡è„)", origin: "æ–°ç–†åé²ç•ª", quality: "ç‰¹çº§", price: 8.5, img: "ğŸ‡" },  
        { id: 3, name: "Orange (æ©˜å­)", origin: "æ±Ÿè¥¿èµ£å—", quality: "Açº§", price: 6.0, img: "ğŸŠ" },  
        { id: 4, name: "Pear (æ¢¨)", origin: "æ²³åŒ—èµµå¿", quality: "ç‰¹çº§", price: 12.0, img: "ğŸ" }  
    ];  
  
    // 2. è§£æ URL å‚æ•°  
    function getQueryParams() {  
        const params = new URLSearchParams(window.location.search);  
        return params.get('d'); // è·å– ?d= åé¢çš„å­—ç¬¦ä¸²  
    }  
  
    // 3. æ¸²æŸ“æº¯æºä¿¡æ¯  
    function renderTrace() {  
        const dataStr = getQueryParams();  
        const container = document.getElementById('trace-list');  
        container.innerHTML = ""; // æ¸…ç©ºåŠ è½½æ–‡å­—  
  
        if (!dataStr) {  
            container.innerHTML = "<p style='text-align:center'>æœªæ£€æµ‹åˆ°æº¯æºäºŒç»´ç æ•°æ®ã€‚</p>";  
            return;  
        }  
  
        // è§£æå­—ç¬¦ä¸² "0_1.5-1_2.0"  
        const items = dataStr.split('-'); // ["0_1.5", "1_2.0"]  
          
        items.forEach(item => {  
            const [id, weight] = item.split('_'); // id="0", weight="1.5"  
            const fruit = fruitDB[parseInt(id)];  
              
            if(fruit) {  
                // ç”Ÿæˆ HTML å¡ç‰‡  
                const html = `  
                    <div class="trace-card">  
                        <div class="fruit-name">${fruit.img} ${fruit.name}</div>  
                        <div class="info-row"><span>äº§åœ°: ${fruit.origin}</span> <span>å“è´¨: ${fruit.quality}</span></div>  
                        <div class="info-row"><span>è´­ä¹°é‡é‡: ${weight} KG</span> <span>çŠ¶æ€: âœ… å·²æ£€æµ‹</span></div>  
                    </div>  
                `;  
                container.innerHTML += html;  
            }  
        });  
    }  
  
    // 4. æ¸²æŸ“å•†åŸåˆ—è¡¨  
    function renderShop() {  
        const container = document.getElementById('shop-list');  
        fruitDB.forEach(fruit => {  
            const html = `  
                <div class="shop-item">  
                    <div style="font-size:2em">${fruit.img}</div>  
                    <strong>${fruit.name}</strong><br>  
                    <small>ï¿¥${fruit.price}/kg</small><br>  
                    <button onclick="order('${fruit.name}')">ç«‹å³ä¸‹å•</button>  
                </div>  
            `;  
            container.innerHTML += html;  
        });  
    }  
  
    // 5. æ¨¡æ‹Ÿä¸‹å•åŠŸèƒ½ (ç®€å•è·³è½¬)  
    function order(name) {  
        alert(`æ­£åœ¨ä¸ºæ‚¨è·³è½¬åˆ°æ”¯ä»˜é¡µé¢è´­ä¹°ï¼š${name}`);  
        // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°çœŸæ­£çš„æ”¯ä»˜é“¾æ¥ï¼Œæˆ–è€…è·³è½¬åˆ°å¾®ä¿¡å®¢æœ  
        // window.location.href = "weixin://...";   
    }  
  
    // åˆå§‹åŒ–é¡µé¢  
    renderTrace();  
    renderShop();  
</script>  
  
</body>  
</html>  
